#!groovy

def provisioner() {
  stage('Checkout Environment Definition') {
    checkout scm
  }

  stage('Connect to Stage Environment') {
  sh """#!/bin/bash -x
      cf target -o cyber
    """
  }

  stage('Deploy Application into Stage Environment Space') {
  sh """#!/bin/bash -x
      cf orgs
    """
  }

  stage('Invoke Acceptance Tests') {
      sh """#!/bin/bash -x
          cf spaces
        """
  }

  stage('Invoke Performance Tests') {
      sh """#!/bin/bash -x
          cf spaces
        """
  }

}

node('Chef Provisioner Prod') {
  provisioner()
}
